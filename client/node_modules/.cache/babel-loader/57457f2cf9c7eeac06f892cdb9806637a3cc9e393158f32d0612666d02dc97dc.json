{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/Desktop/Projects/itransition/task_4/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import AdminPanel from\"./AdminPanel\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isPending=_useState2[0],setPending=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var navigate=useNavigate();function logout(event){fetch('/logout',{method:'GET'}).then(function(response){if(response.ok){window.location.href=\"/\";return;}throw new Error('Request failed.');}).catch(function(error){console.log(\"fetching failed with error message: \",error);});}useEffect(function(){fetch('/data',{method:'GET'}).then(function(response){if(response.ok){response.json().then(function(data){setUsers(data);setPending(false);});}else{navigate('/login');}}).catch(function(error){console.log(\"fetching failed with error message: \",error);});},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[isPending&&/*#__PURE__*/_jsx(\"h1\",{children:\"Loading data\"}),users&&/*#__PURE__*/_jsx(AdminPanel,{users:users,setUsers:setUsers}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,type:\"button\",class:\"btn btn-dark mt-4\",children:\"Log out\"})]});}export default Home;","map":{"version":3,"names":["useState","useEffect","useNavigate","AdminPanel","Home","isPending","setPending","users","setUsers","navigate","logout","event","fetch","method","then","response","ok","window","location","href","Error","catch","error","console","log","json","data"],"sources":["C:/Users/User/Desktop/Projects/itransition/task_4/client/src/Home.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport AdminPanel from \"./AdminPanel\";\r\n\r\nfunction Home() {\r\n    const [isPending, setPending] = useState(true);\r\n    const [users, setUsers] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    function logout(event){\r\n        fetch('/logout', {\r\n            method: 'GET',\r\n        })\r\n            .then(function(response) {\r\n                if(response.ok) {\r\n                    window.location.href = \"/\";\r\n                    return;\r\n                }\r\n                throw new Error('Request failed.');\r\n            })\r\n            .catch(function(error) {\r\n            console.log(\"fetching failed with error message: \", error);\r\n        });\r\n    }\r\n\r\n    useEffect(()=>{\r\n        fetch('/data', {\r\n            method: 'GET'\r\n        })\r\n            .then(function(response) {\r\n                if(response.ok) {\r\n                    response.json().then(data=>{\r\n                        setUsers(data);\r\n                        setPending(false);\r\n                    })\r\n                } else { \r\n                    navigate('/login');\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n            console.log(\"fetching failed with error message: \", error);\r\n        });\r\n    }, []);\r\n\r\n  return (\r\n    <div>\r\n        {isPending && <h1>Loading data</h1>}\r\n        {users && <AdminPanel users={users} setUsers={setUsers}/>}\r\n        <button onClick={logout} type=\"button\" class=\"btn btn-dark mt-4\">Log out</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;"],"mappings":"8IAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,WAAU,KAAM,cAAc,CAAC,wFAEtC,QAASC,KAAI,EAAG,CACZ,cAAgCJ,QAAQ,CAAC,IAAI,CAAC,wCAAvCK,SAAS,eAAEC,UAAU,eAC5B,eAA0BN,QAAQ,CAAC,IAAI,CAAC,yCAAjCO,KAAK,eAAEC,QAAQ,eACtB,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAE9B,QAASQ,OAAM,CAACC,KAAK,CAAC,CAClBC,KAAK,CAAC,SAAS,CAAE,CACbC,MAAM,CAAE,KACZ,CAAC,CAAC,CACGC,IAAI,CAAC,SAASC,QAAQ,CAAE,CACrB,GAAGA,QAAQ,CAACC,EAAE,CAAE,CACZC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAC1B,OACJ,CACA,KAAM,IAAIC,MAAK,CAAC,iBAAiB,CAAC,CACtC,CAAC,CAAC,CACDC,KAAK,CAAC,SAASC,KAAK,CAAE,CACvBC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEF,KAAK,CAAC,CAC9D,CAAC,CAAC,CACN,CAEArB,SAAS,CAAC,UAAI,CACVW,KAAK,CAAC,OAAO,CAAE,CACXC,MAAM,CAAE,KACZ,CAAC,CAAC,CACGC,IAAI,CAAC,SAASC,QAAQ,CAAE,CACrB,GAAGA,QAAQ,CAACC,EAAE,CAAE,CACZD,QAAQ,CAACU,IAAI,EAAE,CAACX,IAAI,CAAC,SAAAY,IAAI,CAAE,CACvBlB,QAAQ,CAACkB,IAAI,CAAC,CACdpB,UAAU,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CACN,CAAC,IAAM,CACHG,QAAQ,CAAC,QAAQ,CAAC,CACtB,CACJ,CAAC,CAAC,CACDY,KAAK,CAAC,SAASC,KAAK,CAAE,CACvBC,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAEF,KAAK,CAAC,CAC9D,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAER,mBACE,uBACKjB,SAAS,eAAI,oCAAqB,CAClCE,KAAK,eAAI,KAAC,UAAU,EAAC,KAAK,CAAEA,KAAM,CAAC,QAAQ,CAAEC,QAAS,EAAE,cACzD,eAAQ,OAAO,CAAEE,MAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,mBAAmB,qBAAiB,GAC/E,CAEV,CAEA,cAAeN,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}