{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/Desktop/Projects/itransition/task_4/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AdminPanel(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPending=_useState2[0],setPending=_useState2[1];var navigate=useNavigate();function checkState(event){var mainCheckBox=document.querySelector('#maincheckbox');var checkBoxes=document.querySelectorAll('.selectuser');var checkCounter=0;if(event.target.id==='maincheckbox'&&mainCheckBox.checked){checkBoxes.forEach(function(box){return box.checked=true;});}else if(event.target.id==='maincheckbox'&&!mainCheckBox.checkBoxes){checkBoxes.forEach(function(box){return box.checked=false;});}checkBoxes.forEach(function(box){if(box.checked)checkCounter=checkCounter+1;});if(checkCounter>0){document.querySelector('#toolbar').classList.remove('disabled');if(checkBoxes.length===checkCounter){mainCheckBox.checked=true;}else{mainCheckBox.checked=false;}}else{document.querySelector('#toolbar').classList.add('disabled');}}function handleClick(event){setPending(true);var selectedItems=[];var checkBoxes=document.querySelectorAll('.selectuser');checkBoxes.forEach(function(item){if(item.checked)selectedItems.push(item.id);});fetch('/update',{method:'POST',headers:{'Content-Type':'application/json;charset=utf-8'},body:JSON.stringify({data:selectedItems,action:event.currentTarget.name})}).then(function(response){setPending(false);if(response.ok){response.json().then(function(data){props.setUsers(data);});}else{window.location.reload(true);}}).catch(function(error){console.log(\"fetching failed with error message: \",error);setPending(false);});}var users=props.users;var tableRows=users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{onChange:checkState,scope:\"row\",children:/*#__PURE__*/_jsx(\"input\",{id:user._id,className:\"selectuser\",type:\"checkbox\"})}),/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsxs(\"td\",{children:[user.fname,\" \",user.lname]}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:new Date(user.regtime).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:new Date(user.logtime).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:user.status})]},user._id);});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[isPending&&/*#__PURE__*/_jsx(\"h1\",{children:\"Updating...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3 disabled\",id:\"toolbar\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,name:\"block\",type:\"button\",className:\"btn btn-danger mx-1 px-4\",children:\"Block\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,name:\"unblock\",className:\"btn btn-secondary mx-1 px-4\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-unlock-fill\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2z\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,name:\"delete\",className:\"btn btn-secondary mx-1 px-4\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",fill:\"currentColor\",className:\"bi bi-trash-fill\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"})})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{scope:\"col\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Select all\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{onChange:checkState,type:\"checkbox\",id:\"maincheckbox\"})})]}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Registration time\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Last login time\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"table-group-divider\",children:tableRows})]})})]});}export default AdminPanel;","map":{"version":3,"names":["useState","useNavigate","AdminPanel","props","isPending","setPending","navigate","checkState","event","mainCheckBox","document","querySelector","checkBoxes","querySelectorAll","checkCounter","target","id","checked","forEach","box","classList","remove","length","add","handleClick","selectedItems","item","push","fetch","method","headers","body","JSON","stringify","data","action","currentTarget","name","then","response","ok","json","setUsers","window","location","reload","catch","error","console","log","users","tableRows","map","user","_id","fname","lname","email","Date","regtime","toLocaleString","logtime","status"],"sources":["C:/Users/User/Desktop/Projects/itransition/task_4/client/src/AdminPanel.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction AdminPanel(props){\r\n    const [isPending, setPending] = useState(false);\r\n    const navigate = useNavigate();\r\n    function checkState(event){\r\n        let mainCheckBox = document.querySelector('#maincheckbox');\r\n        let checkBoxes = document.querySelectorAll('.selectuser');\r\n        let checkCounter = 0;\r\n        if(event.target.id === 'maincheckbox' && mainCheckBox.checked){\r\n            checkBoxes.forEach((box)=> box.checked = true);\r\n        } else if(event.target.id === 'maincheckbox' && !mainCheckBox.checkBoxes){\r\n            checkBoxes.forEach((box)=> box.checked = false);\r\n        }\r\n        checkBoxes.forEach((box)=>{\r\n            if(box.checked) checkCounter = checkCounter + 1;\r\n        });\r\n\r\n        if(checkCounter > 0){\r\n            document.querySelector('#toolbar').classList.remove('disabled');\r\n            if(checkBoxes.length === checkCounter){\r\n                mainCheckBox.checked = true;\r\n            } else {\r\n                mainCheckBox.checked = false;\r\n            }\r\n        } else {\r\n            document.querySelector('#toolbar').classList.add('disabled');\r\n        }\r\n    }\r\n\r\n    function handleClick(event){\r\n        setPending(true);\r\n        let selectedItems = [];\r\n        let checkBoxes = document.querySelectorAll('.selectuser');\r\n\r\n        checkBoxes.forEach(item => {\r\n            if(item.checked) selectedItems.push(item.id);\r\n        });\r\n\r\n        fetch('/update', {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json;charset=utf-8'},\r\n            body: JSON.stringify({\r\n                data: selectedItems,\r\n                action: event.currentTarget.name\r\n            })\r\n          })\r\n            .then(function(response) {\r\n              setPending(false);\r\n              if(response.ok) {\r\n                response.json().then(data=>{\r\n                    props.setUsers(data);\r\n                });\r\n              } else {\r\n                window.location.reload(true);\r\n              }\r\n            })\r\n            .catch(function(error) {\r\n              console.log(\"fetching failed with error message: \", error);\r\n              setPending(false);\r\n            });\r\n    }\r\n    const users = props.users;\r\n    const tableRows = users.map((user) => \r\n        <tr key={user._id}>\r\n            <th onChange={checkState} scope=\"row\"><input id={user._id} className=\"selectuser\" type=\"checkbox\" /></th>\r\n            <td>{user._id}</td>\r\n            <td>{user.fname} {user.lname}</td>\r\n            <td>{user.email}</td>\r\n            <td>{(new Date(user.regtime)).toLocaleString()}</td>\r\n            <td>{(new Date(user.logtime)).toLocaleString()}</td>\r\n            <td>{user.status}</td>\r\n        </tr>\r\n    );\r\n\r\n    return (\r\n        <div className='container'>\r\n            {isPending && <h1>Updating...</h1>}\r\n            <div className='container my-3 disabled' id=\"toolbar\">\r\n                <button onClick={handleClick} name=\"block\" type=\"button\" className=\"btn btn-danger mx-1 px-4\">Block</button>\r\n                <button onClick={handleClick} name=\"unblock\" className='btn btn-secondary mx-1 px-4'><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-unlock-fill\" viewBox=\"0 0 16 16\"><path d=\"M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2z\"/></svg></button>\r\n                <button onClick={handleClick} name=\"delete\" className='btn btn-secondary mx-1 px-4'><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-trash-fill\" viewBox=\"0 0 16 16\"><path d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"/></svg></button>\r\n            </div>\r\n            <div>\r\n                <table className=\"table\">\r\n                    <thead className=\"thead-dark\">\r\n                        <tr>\r\n                            <th scope=\"col\">\r\n                                <div>Select all</div>\r\n                                <div><input onChange={checkState} type=\"checkbox\" id='maincheckbox' /></div>\r\n                            </th>\r\n                            <th scope=\"col\">ID</th>\r\n                            <th scope=\"col\">Name</th>\r\n                            <th scope=\"col\">Email</th>\r\n                            <th scope=\"col\">Registration time</th>\r\n                            <th scope=\"col\">Last login time</th>\r\n                            <th scope=\"col\">Status</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"table-group-divider\">\r\n                        {tableRows}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AdminPanel;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}