{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\Projects\\\\itransition\\\\task_4\\\\client\\\\src\\\\Home.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport AdminPanel from \"./AdminPanel\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Home() {\n  _s();\n  const [isPending, setPending] = useState(true);\n  const [users, setUsers] = useState(null);\n  const navigate = useNavigate();\n  function logout(event) {\n    fetch('/logout', {\n      method: 'GET'\n    }).then(function (response) {\n      if (response.ok) {\n        window.location.href = \"/\";\n        return;\n      }\n      throw new Error('Request failed.');\n    }).catch(function (error) {\n      console.log(\"fetching failed with error message: \", error);\n    });\n  }\n  useEffect(() => {\n    fetch('/data', {\n      method: 'GET'\n    }).then(function (response) {\n      if (response.ok) {\n        response.json().then(data => {\n          setUsers(data);\n          setPending(false);\n        });\n      } else {\n        navigate('/login');\n      }\n    }).catch(function (error) {\n      console.log(\"fetching failed with error message: \", error);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [isPending && /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading data\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 23\n    }, this), users && /*#__PURE__*/_jsxDEV(AdminPanel, {\n      users: users,\n      setUsers: setUsers\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: logout,\n      type: \"button\",\n      class: \"btn btn-dark mt-4\",\n      children: \"Log out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"dUmRetKD/lsYWcJGvBk7/EUs3ic=\", false, function () {\n  return [useNavigate];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useState","useEffect","useNavigate","AdminPanel","Home","isPending","setPending","users","setUsers","navigate","logout","event","fetch","method","then","response","ok","window","location","href","Error","catch","error","console","log","json","data"],"sources":["C:/Users/User/Desktop/Projects/itransition/task_4/client/src/Home.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport AdminPanel from \"./AdminPanel\";\r\n\r\nfunction Home() {\r\n    const [isPending, setPending] = useState(true);\r\n    const [users, setUsers] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    function logout(event){\r\n        fetch('/logout', {\r\n            method: 'GET',\r\n        })\r\n            .then(function(response) {\r\n                if(response.ok) {\r\n                    window.location.href = \"/\";\r\n                    return;\r\n                }\r\n                throw new Error('Request failed.');\r\n            })\r\n            .catch(function(error) {\r\n            console.log(\"fetching failed with error message: \", error);\r\n        });\r\n    }\r\n\r\n    useEffect(()=>{\r\n        fetch('/data', {\r\n            method: 'GET'\r\n        })\r\n            .then(function(response) {\r\n                if(response.ok) {\r\n                    response.json().then(data=>{\r\n                        setUsers(data);\r\n                        setPending(false);\r\n                    })\r\n                } else { \r\n                    navigate('/login');\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n            console.log(\"fetching failed with error message: \", error);\r\n        });\r\n    }, []);\r\n\r\n  return (\r\n    <div>\r\n        {isPending && <h1>Loading data</h1>}\r\n        {users && <AdminPanel users={users} setUsers={setUsers}/>}\r\n        <button onClick={logout} type=\"button\" class=\"btn btn-dark mt-4\">Log out</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,UAAU,MAAM,cAAc;AAAC;AAEtC,SAASC,IAAI,GAAG;EAAA;EACZ,MAAM,CAACC,SAAS,EAAEC,UAAU,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAMS,QAAQ,GAAGP,WAAW,EAAE;EAE9B,SAASQ,MAAM,CAACC,KAAK,EAAC;IAClBC,KAAK,CAAC,SAAS,EAAE;MACbC,MAAM,EAAE;IACZ,CAAC,CAAC,CACGC,IAAI,CAAC,UAASC,QAAQ,EAAE;MACrB,IAAGA,QAAQ,CAACC,EAAE,EAAE;QACZC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;QAC1B;MACJ;MACA,MAAM,IAAIC,KAAK,CAAC,iBAAiB,CAAC;IACtC,CAAC,CAAC,CACDC,KAAK,CAAC,UAASC,KAAK,EAAE;MACvBC,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEF,KAAK,CAAC;IAC9D,CAAC,CAAC;EACN;EAEArB,SAAS,CAAC,MAAI;IACVW,KAAK,CAAC,OAAO,EAAE;MACXC,MAAM,EAAE;IACZ,CAAC,CAAC,CACGC,IAAI,CAAC,UAASC,QAAQ,EAAE;MACrB,IAAGA,QAAQ,CAACC,EAAE,EAAE;QACZD,QAAQ,CAACU,IAAI,EAAE,CAACX,IAAI,CAACY,IAAI,IAAE;UACvBlB,QAAQ,CAACkB,IAAI,CAAC;UACdpB,UAAU,CAAC,KAAK,CAAC;QACrB,CAAC,CAAC;MACN,CAAC,MAAM;QACHG,QAAQ,CAAC,QAAQ,CAAC;MACtB;IACJ,CAAC,CAAC,CACDY,KAAK,CAAC,UAASC,KAAK,EAAE;MACvBC,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAEF,KAAK,CAAC;IAC9D,CAAC,CAAC;EACN,CAAC,EAAE,EAAE,CAAC;EAER,oBACE;IAAA,WACKjB,SAAS,iBAAI;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAqB,EAClCE,KAAK,iBAAI,QAAC,UAAU;MAAC,KAAK,EAAEA,KAAM;MAAC,QAAQ,EAAEC;IAAS;MAAA;MAAA;MAAA;IAAA,QAAE,eACzD;MAAQ,OAAO,EAAEE,MAAO;MAAC,IAAI,EAAC,QAAQ;MAAC,KAAK,EAAC,mBAAmB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAiB;EAAA;IAAA;IAAA;IAAA;EAAA,QAC/E;AAEV;AAAC,GA/CQN,IAAI;EAAA,QAGQF,WAAW;AAAA;AAAA,KAHvBE,IAAI;AAiDb,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}